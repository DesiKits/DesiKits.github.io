!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ahoy=e()}(this,(function(){"use strict";function t(){return $.urlPrefix+$.visitsUrl}function e(){return $.urlPrefix+$.eventsUrl}function n(t){return 0===Object.keys(t).length}function i(){return($.useBeacon||$.trackNow)&&n($.headers)&&D&&void 0!==window.navigator.sendBeacon&&!$.withCredentials}function a(t){var e=new FormData;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.append(n,t[n]);return e}function r(t,e,n){S.set(t,e,n,$.cookieDomain||$.domain)}function o(t){return S.get(t)}function s(t){S.set(t,"",-1)}function c(t){o("ahoy_debug")&&window.console.log(t)}function u(){for(var t;t=L.shift();)t();P=!0}function l(t,e){var n=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return n?n.apply(t,[e])?t:t.parentElement?l(t.parentElement,e):null:(c("Unable to match"),null)}function d(t,e,n){document.addEventListener(t,(function(t){var i=l(t.target,e);if(i){var a=E(i,"data-ahoy-skip");if(null!==a&&"false"!==a)return;n.call(i,t)}}))}function f(t){"interactive"===document.readyState||"complete"===document.readyState?setTimeout(t,0):document.addEventListener("DOMContentLoaded",t)}function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function v(){$.cookies&&D&&r("ahoy_events",JSON.stringify(z),1)}function m(){var t=document.querySelector("meta[name=csrf-token]");return t&&t.content}function p(){var t=document.querySelector("meta[name=csrf-param]");return t&&t.content}function y(t){var e=m();e&&t.setRequestHeader("X-CSRF-Token",e)}function w(t,e,n){if(D)if(V&&V.ajax)V.ajax({type:"POST",url:t,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:y,success:n,headers:$.headers,xhrFields:{withCredentials:$.withCredentials}});else{var i=new XMLHttpRequest;for(var a in i.open("POST",t,!0),i.withCredentials=$.withCredentials,i.setRequestHeader("Content-Type","application/json"),$.headers)Object.prototype.hasOwnProperty.call($.headers,a)&&i.setRequestHeader(a,$.headers[a]);i.onload=function(){200===i.status&&n()},y(i),i.send(JSON.stringify(e))}}function g(t){var e={events:[t]};return $.cookies&&(e.visit_token=t.visit_token,e.visitor_token=t.visitor_token),delete t.visit_token,delete t.visitor_token,e}function k(t){M.ready((function(){w(e(),g(t),(function(){for(var e=0;e<z.length;e++)if(z[e].id===t.id){z.splice(e,1);break}v()}))}))}function x(t){M.ready((function(){var n=g(t),i=p(),r=m();i&&r&&(n[i]=r),n.events_json=JSON.stringify(n.events),delete n.events,window.navigator.sendBeacon(e(),a(n))}))}function b(){return $.page||window.location.pathname}function _(t){return t&&t.length>0?t:null}function O(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&null===t[e]&&delete t[e];return t}function C(){return O({tag:this.tagName.toLowerCase(),id:_(this.id),class:_(this.className),page:b(),section:E(this,"data-section")})}function E(t,e){for(;t&&t!==document;t=t.parentNode)if(t.hasAttribute(e))return t.getAttribute(e);return null}function A(){if(P=!1,T=M.getVisitId(),N=M.getVisitorId(),j=o("ahoy_track"),!1===$.cookies||!1===$.trackVisits)c("Visit tracking disabled"),u();else if(T&&N&&!j)c("Active visit"),u();else if(T||r("ahoy_visit",T=h(),$.visitDuration),o("ahoy_visit")){c("Visit started"),N||r("ahoy_visitor",N=h(),$.visitorDuration);var e={visit_token:T,visitor_token:N,platform:$.platform,landing_page:window.location.href,screen_width:window.screen.width,screen_height:window.screen.height,js:!0};for(var n in document.referrer.length>0&&(e.referrer=document.referrer),$.visitParams)Object.prototype.hasOwnProperty.call($.visitParams,n)&&(e[n]=$.visitParams[n]);c(e),w(t(),e,(function(){s("ahoy_track"),u()}))}else c("Cookies disabled"),u()}var S={set:function(t,e,n,i){var a="",r="";if(n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),a="; expires="+o.toGMTString()}i&&(r="; domain="+i),document.cookie=t+"="+escape(e)+a+r+"; path=/; samesite=lax"},get:function(t){var e,n,i=t+"=",a=document.cookie.split(";");for(e=0;e<a.length;e++){for(n=a[e];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(i))return unescape(n.substring(i.length,n.length))}return null}},$={urlPrefix:"",visitsUrl:"/ahoy/visits",eventsUrl:"/ahoy/events",page:null,platform:"Web",useBeacon:!0,startOnReady:!0,trackVisits:!0,cookies:!0,cookieDomain:null,headers:{},visitParams:{},withCredentials:!1,visitDuration:240,visitorDuration:1051200},M=window.ahoy||window.Ahoy||{};M.configure=function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&($[e]=t[e])},M.configure(M);var T,N,j,V=window.jQuery||window.Zepto||window.$,P=!1,L=[],D="undefined"!=typeof JSON&&void 0!==JSON.stringify,z=[];M.ready=function(t){P?t():L.push(t)},M.getVisitId=M.getVisitToken=function(){return o("ahoy_visit")},M.getVisitorId=M.getVisitorToken=function(){return o("ahoy_visitor")},M.reset=function(){return s("ahoy_visit"),s("ahoy_visitor"),s("ahoy_events"),s("ahoy_track"),!0},M.debug=function(t){return!1===t?s("ahoy_debug"):r("ahoy_debug","t",525600),!0},M.track=function(t,e){var n={name:t,properties:e||{},time:(new Date).getTime()/1e3,id:h(),js:!0};return M.ready((function(){$.cookies&&!M.getVisitId()&&A(),M.ready((function(){c(n),n.visit_token=M.getVisitId(),n.visitor_token=M.getVisitorId(),i()?x(n):(z.push(n),v(),setTimeout((function(){k(n)}),1e3))}))})),!0},M.trackView=function(t){var e={url:window.location.href,title:document.title,page:b()};if(t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);M.track("$view",e)},M.trackClicks=function(t){if(void 0===t)throw new Error("Missing selector");d("click",t,(function(t){var e=C.call(this,t);e.text="input"===e.tag?this.value:(this.textContent||this.innerText||this.innerHTML).replace(/[\s\r\n]+/g," ").trim(),e.href=this.href,M.track("$click",e)}))},M.trackSubmits=function(t){if(void 0===t)throw new Error("Missing selector");d("submit",t,(function(t){var e=C.call(this,t);M.track("$submit",e)}))},M.trackChanges=function(t){if(c("trackChanges is deprecated and will be removed in 0.5.0"),void 0===t)throw new Error("Missing selector");d("change",t,(function(t){var e=C.call(this,t);M.track("$change",e)}))};try{z=JSON.parse(o("ahoy_events")||"[]")}catch(t){}for(var I=0;I<z.length;I++)k(z[I]);return M.start=function(){A(),M.start=function(){}},f((function(){$.startOnReady&&M.start()})),M})),function(){var t;t=function(){var t;return"function"!=typeof window.CustomEvent&&((t=function(t,e){var n;return null==e&&(e={bubbles:!1,cancelable:!1,detail:void 0}),(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}).prototype=window.Event.prototype,window.CustomEvent=t)},ready((function(){var e;return t(),e=null,window.addEventListener("resize onorientationchange",(function(){})),$(window).on("resize onorientationchange",(function(){return cancel(e),e=delay(100,(function(){var t;return t=new CustomEvent("delayedResize"),window.dispatchEvent(t)}))}))}))}.call(this),$(document).ready((function(){"use strict";var t=$(".js--amplitudeForm"),e=t.find($("[data-amplitude-name]")),n={},i="counter";$(document).on("click",".js--amplitudeButton",(function(t){var e=$(t.currentTarget).data(),n={};e.amplitudeName&&(n[e.amplitudeName]=e.amplitudeValue),e.amplitudeNameExtra&&(n[e.amplitudeNameExtra]=e.amplitudeValueExtra),Mealhand.Analytics.Amplitude.send(e.amplitudeEvent,n)})),e.click((function(e){var a=e.currentTarget.dataset.amplitudeName;n[a+"_count"]=n[a+"_count"]+1||1,t.data(i,n)})),t.submit((function(e){var n={};$(e.target).find($("[data-amplitude-name]")).each((function(t,e){var i=e.dataset.amplitudeName,a=e.dataset.amplitudeValue,r=$(e).prop("checked");return"radio"===e.type&&r?n[i]=a:"checkbox"===e.type&&r?n.hasOwnProperty(i)?n[i].push(a):n[i]=[a]:"OPTION"===e.tagName&&e.selected&&(n[i]=a),n}));var i=t.data().amplitudeEvent,a=t.data().amplitudeCounter,r=n,o=t.data().counter||null;return Mealhand.Analytics.Amplitude.send(i,r),null!=o&&Mealhand.Analytics.Amplitude.send(a,o),!0}))})),function(){var t;null==Mealhand.Analytics&&(Mealhand.Analytics={}),null==(t=Mealhand.Analytics).Amplitude&&(t.Amplitude={}),Mealhand.Analytics.Amplitude={send:function(t,e){if(window.amplitude)return window.amplitude.getInstance().logEvent(t,e)}}}.call(this),function(){var t;null==Mealhand.Analytics&&(Mealhand.Analytics={}),null==(t=Mealhand.Analytics).Optimizely&&(t.Optimizely={}),Mealhand.Analytics.Optimizely={DEFAULT_VALUES:{type:"event"},track:function(t,e){var n;return null==e&&(e={}),window.optimizely=window.optimizely||[],n={eventName:t,tags:e},$.extend(n,this.DEFAULT_VALUES),window.optimizely.push(n)}}}.call(this),function(){ready((function(){var t,e,n;return t=document.body,n=null,e="is--hoverDisabled",window.addEventListener("scroll",(function(){return cancel(n),t.classList.contains(e)||t.classList.add(e),n=delay(100,(function(){return t.classList.remove(e)}))}),!1)}))}.call(this),function(){$((function(){var t,e;if((e=document.location.hash)&&!e.match(/#_=_|access_token/)&&(t=$(e).closest(".tabs")))return t.find(".js--tabs__link.is--active").removeClass("is--active"),t.find(".js--tabs__link[href='"+e+"']").addClass("is--active"),t.find(".tabPanes__pane.is--visible").removeClass("is--visible"),$(e).addClass("is--visible").trigger("show.tab")}))}.call(this),function(){var t,e;e={selector:{container:".sectionNav",menu:".sectionNav__list"},klass:{narrow:"is--narrow"}},t=function(t,n){var i,a;return a=$(t).outerWidth(),i=0,$(t+" li").each((function(){return i+=$(this).outerWidth()})),i>a?$(n).addClass(e.klass.narrow):$(n).removeClass(e.klass.narrow)},$(window).on("load delayedResize fontLoaded",(function(){return delay(250,(function(){return t(e.selector.menu,e.selector.container)}))}))}.call(this),function(){}.call(this);